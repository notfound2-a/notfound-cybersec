<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <title>404 CYBERSEC Hacker Terminal</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <style>
    /* ---------------- GLOBAL STYLE ---------------- */
    body {
        margin: 0;
        background: #000;
        overflow-y: auto !important;
        overflow-x: hidden;
        font-family: "Courier New", monospace;
    }
    /* ---------------- MATRIX RAIN ---------------- */
    canvas#matrix {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        z-index: 1;
        pointer-events: none;
    }

    /* ---------------- TERMINAL WRAPPER ---------------- */
    #terminal-wrap {
        position: absolute;
        top: 0;
        left: 0;
        z-index: 2;
        width: 50%;
        height: 100vh;
        padding: 20px;
        background: rgba(0,0,0,0.75);
        border-right: 2px solid #00eaff;
        box-shadow: 0 0 25px #00eaff, inset 0 0 30px #0088aa;
        color: #0ff;
        font-size: 16px;
        white-space: pre-wrap;
        word-break: break-word;
        overflow-y: auto;          /* <── FIX SCROLL */
    }

    /* CUSTOM SCROLLBAR */
    #terminal-wrap::-webkit-scrollbar {
        width: 6px;
    }
    #terminal-wrap::-webkit-scrollbar-thumb {
        background: #00eaff;
        border-radius: 10px;
    }

    /* ---------------- BLINKING CURSOR ---------------- */
    .cursor {
        display: inline-block;
        width: 10px;
        height: 18px;
        background: #00eaff;
        animation: blink 0.6s infinite;
    }
    @keyframes blink { 0%,100% {opacity:1} 50%{opacity:0} }

    /* ---------------- SIDE PANEL ---------------- */
    #osint-panel {
        position: absolute;
        top: 0;
        right: 0;
        z-index: 2;
        width: 50%;
        height: 100vh;
        padding: 20px;
        background: rgba(0, 0, 0, 0.75);
        border-left: 2px solid #a200ff;
        color: #ff33cc;
        font-size: 16px;
        overflow-y: auto;
        box-shadow: 0 0 25px #a200ff, inset 0 0 30px #ff00ff;
    }

    #osint-panel h3 {
        color: #a200ff;
    }

    #osint-panel pre {
        color: #ff33cc;
    }

    /* ---------------- MAP ---------------- */
    #map {
        width: 100%;
        height: 350px;
        border: 2px solid #a200ff;
        margin-bottom: 20px;
    }

    /* ---------------- NEW TERMINAL BUTTON ---------------- */
    #newTerm {
        position: fixed;
        top: 20px;
        left: 50%;
        transform: translateX(-50%);
        padding: 8px 18px;
        background: #00eaff;
        color: #000;
        font-weight: bold;
        border-radius: 6px;
        cursor: pointer;
        z-index: 3;
        box-shadow: 0 0 15px #00eaff;
    }
    #newTerm:hover {
        box-shadow: 0 0 25px #00ffff;
    }

    /* ==== CYBERPUNK OSINT CARD STYLE ==== */
    .osint-box {
        background: rgba(10, 0, 20, 0.65);
        border: 2px solid #a200ff;
        box-shadow: 0 0 20px #a200ff55, inset 0 0 20px #ff00ff33;
        padding: 12px;
        margin-bottom: 20px;
        border-radius: 8px;
        color: #ff33cc;
        font-size: 14px;
        overflow-x: auto;
        white-space: pre-wrap;
    }

    .osint-title {
        font-weight: bold;
        font-size: 16px;
        margin-bottom: 8px;
        color: #ff66ff;
        text-shadow: 0 0 5px #ff00ff;
    }

    </style>
</head>
<body>

<canvas id="matrix"></canvas>

<div id="terminal-wrap"></div>
<div id="osint-panel">
    <h3>OSINT Information</h3>

    <div id="map" class="osint-box"></div>

    <div class="osint-box">
        <div class="osint-title">GeoIP Info</div>
        <pre id="geo-info"></pre>
    </div>

    <div class="osint-box">
        <div class="osint-title">ASN Info</div>
        <pre id="asn-info"></pre>
    </div>

    <div class="osint-box">
        <div class="osint-title">Reverse DNS</div>
        <pre id="rdns-info"></pre>
    </div>

    <div class="osint-box">
        <div class="osint-title">SSL Information</div>
        <pre id="ssl-info"></pre>
    </div>

    <div class="osint-box">
        <div class="osint-title">Shodan Lite</div>
        <pre id="shodan-info"></pre>
    </div>

</div>

<audio id="typeSound" src="https://assets.mixkit.co/sfx/preview/mixkit-typewriter-soft-hit-1125.mp3"></audio>

<script>
// ----------------- JavaScript Code -----------------

/* ==========================================================
   MATRIX RAIN EFFECT
========================================================== */
const canvas = document.getElementById("matrix");
const ctx = canvas.getContext("2d");
canvas.height = window.innerHeight;
canvas.width = window.innerWidth;

const chars = "01ABCDEFGHIJKLMNOPQRSTUVWXYZ";
const drops = Array(Math.floor(canvas.width / 15)).fill(1);

function matrixRain() {
    ctx.fillStyle = "rgba(0,0,0,0.05)";
    ctx.fillRect(0, 0, canvas.width, canvas.height);
    ctx.fillStyle = "#00eaff";
    ctx.font = "15px Courier";
    drops.forEach((y, i) => {
        const text = chars[Math.floor(Math.random() * chars.length)];
        ctx.fillText(text, i * 15, y * 15);
        drops[i] = y * 15 > canvas.height && Math.random() > 0.975 ? 0 : y + 1;
    });
}
setInterval(matrixRain, 40);

/* ==========================================================
   TERMINAL ENGINE
========================================================== */
const terminal = document.getElementById("terminal-wrap");
const audio = document.getElementById("typeSound");
let input = "";

// play type sound
function playSound() {
    audio.currentTime = 0;
    audio.play();
}

// print text character by character
async function print(text, delay = 5) {
    return new Promise(resolve => {
        let i = 0;
        function typing() {
            if (i < text.length) {
                terminal.innerHTML += text[i];
                playSound();
                i++;
                setTimeout(typing, delay);
            } else resolve();
        }
        typing();
    });
}

// new line prompt
function newLine() {
    terminal.innerHTML += "> ";
    createCursor();
    terminal.scrollTop = terminal.scrollHeight;
}

// create blinking cursor
function createCursor() {
    const old = document.querySelector(".cursor");
    if (old) old.remove();
    const c = document.createElement("span");
    c.classList.add("cursor");
    terminal.appendChild(c);
}

/* ==========================================================
   BOOT SEQUENCE
========================================================== */
async function boot() {
    terminal.innerHTML = "";
    await print("BOOTING 404 CYBERSEC TERMINAL...\n", 20);
    await print("Loading kernel modules...\n", 15);
    await print("Initializing matrix engine...\n", 10);
    await print("Ready.\n\n");
    await print("Ketik 'help' atau tekan angka:\n1 WHOIS | 2 SCAN | 3 HEADERS | 4 DNS | 5 SSL\n\n");
    newLine();
}

/* ==========================================================
   OSINT FUNCTIONS
========================================================== */
async function fetchGeoIP(ip) {
    const res = await fetch(`https://ipapi.co/${ip}/json/`);
    const data = await res.json();
    return JSON.stringify(data, null, 2);
}

async function fetchASN(ip) {
    const res = await fetch(`https://api.bgpview.io/ip/${ip}`);
    const data = await res.json();
    return JSON.stringify(data.data?.prefixes?.[0], null, 2);
}

async function fetchReverseDNS(domain) {
    const res = await fetch(`https://api.hackertarget.com/reversedns/?q=${domain}`);
    return res.text();
}

async function fetchSSLInfo(domain) {
    const res = await fetch(`https://api.hackertarget.com/sslinfo/?q=${domain}`);
    return res.text();
}

async function fetchShodanLite(ip) {
    const geoData = await fetchGeoIP(ip);
    const asnData = await fetchASN(ip);
    return `GeoIP: ${geoData}\nASN: ${asnData}`;
}

/* ==========================================================
   DISPLAY MAP
========================================================== */
function displayMap(lat, lon) {
    const mapUrl = `https://staticmap.openstreetmap.de/staticmap.php?center=${lat},${lon}&zoom=5&size=600x350`;
    document.getElementById("map").innerHTML = `<img src="${mapUrl}" alt="Map" />`;
}

/* ==========================================================
   COMMAND PROCESSOR
========================================================== */
async function commandProcessor(cmd) {
    cmd = cmd.trim();
    if (!cmd) return newLine();
    terminal.innerHTML += "\n";

    if (cmd.startsWith("geo ")) {
        const ip = cmd.split(" ")[1];
        const geoData = await fetchGeoIP(ip);
        document.getElementById("ip-reputation").innerText = geoData;
    } else if (cmd.startsWith("asn ")) {
        const ip = cmd.split(" ")[1];
        const asnData = await fetchASN(ip);
        document.getElementById("asn-info").innerText = asnData;
    } else if (cmd.startsWith("rdns ")) {
        const domain = cmd.split(" ")[1];
        const rdnsData = await fetchReverseDNS(domain);
        document.getElementById("rdns-info").innerText = rdnsData;
    } else if (cmd.startsWith("ssl ")) {
        const domain = cmd.split(" ")[1];
        const sslData = await fetchSSLInfo(domain);
        document.getElementById("ssl-info").innerText = sslData;
    } else if (cmd.startsWith("shodan ")) {
        const ip = cmd.split(" ")[1];
        const shodanData = await fetchShodanLite(ip);
        document.getElementById("shodan-info").innerText = shodanData;

        // ambil lokasi & tampilkan map
        const geo = await fetch(`https://ipapi.co/${ip}/json/`).then(r => r.json());
        if (geo.latitude && geo.longitude) {
            displayMap(geo.latitude, geo.longitude);
        }

    } else if (cmd.startsWith("whois ")) {
        const domain = cmd.split(" ")[1];
        const data = await fetch(`https://api.hackertarget.com/whois/?q=${domain}`).then(r => r.text());
        terminal.innerHTML += data + "\n";

    } else if (cmd.startsWith("dns ")) {
        const domain = cmd.split(" ")[1];
        const data = await fetch(`https://api.hackertarget.com/dnslookup/?q=${domain}`).then(r => r.text());
        terminal.innerHTML += data + "\n";

    } else if (cmd.startsWith("headers ")) {
        const domain = cmd.split(" ")[1];
        const data = await fetch(`https://api.hackertarget.com/httpheaders/?q=${domain}`).then(r => r.text());
        terminal.innerHTML += data + "\n";

    } else if (cmd.startsWith("scan ")) {
        const domain = cmd.split(" ")[1];
        const data = await fetch(`https://api.hackertarget.com/nmap/?q=${domain}`).then(r => r.text());
        terminal.innerHTML += data + "\n";

    } else if (cmd === "help") {
        terminal.innerHTML +=
`COMMANDS:
  whois <domain>
  dns <domain>
  headers <domain>
  scan <domain>
  ssl <domain>
  rdns <domain>
  geo <ip>
  asn <ip>
  shodan <ip>
  
PANEL COMMANDS:
  geo <ip>       → update map + geo info
  asn <ip>       → ASN panel
  rdns <domain>  → reverse DNS
  ssl <domain>   → SSL info
  shodan <ip>    → OSINT combined panel

`;
    } else {
        terminal.innerHTML += `Unknown command: ${cmd}\n`;
    }

    newLine();
}

/* ==========================================================
   KEY PRESS HANDLER
========================================================== */
document.addEventListener("keydown", e => {
    const cursor = document.querySelector(".cursor");

    if (e.key.length === 1) {
        input += e.key;
        terminal.insertBefore(document.createTextNode(e.key), cursor);
        playSound();
    }

    if (e.key === "Backspace") {
        e.preventDefault();
        input = input.slice(0, -1);
        terminal.innerHTML = terminal.innerHTML.slice(0, -1);
    }

    if (e.key === "Enter") {
        cursor.remove();
        commandProcessor(input);
        input = "";
    }
});

/* ==========================================================
   START TERMINAL
========================================================== */
boot();
</script>

</body>
</html>
