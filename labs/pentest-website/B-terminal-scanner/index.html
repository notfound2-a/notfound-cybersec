<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>404 CYBERSEC — Hacker Terminal</title>
<style>
  /* ===== page & background ===== */
  :root{
    --bg:#01030a;
    --neon:#00f0ff;
    --accent:#00ffab;
    --muted:#7fb2b7;
  }
  html,body{height:100%;margin:0;background:linear-gradient(180deg,#000814 0%, #01030a 80%);font-family: "Roboto Mono", "Courier New", monospace; color:var(--neon);-webkit-font-smoothing:antialiased;overflow:hidden}

  /* matrix canvas sits behind everything */
  #matrix {position:fixed; inset:0; z-index:0; pointer-events:none; opacity:0.14; filter:blur(0.3px)}

  /* top controls */
  .bar{position:fixed;top:12px;left:12px;right:12px;display:flex;justify-content:space-between;align-items:center;z-index:50;gap:12px}
  .controls{display:flex;gap:8px;align-items:center}
  button.ctrl{background:transparent;border:1px solid rgba(255,255,255,0.04);color:var(--muted);padding:8px 10px;border-radius:8px;cursor:pointer;backdrop-filter:blur(4px)}
  button.ctrl.primary{border-color:rgba(0,255,171,0.14); color:var(--accent); box-shadow:0 6px 24px rgba(0,255,171,0.03)}
  .title{font-weight:700;color:var(--accent);text-shadow:0 0 12px rgba(0,255,171,0.06);font-size:14px;letter-spacing:0.6px}

  /* container for terminals */
  .grid{position:absolute;inset:72px 12px 12px 12px;display:grid;grid-template-columns:repeat(auto-fit,minmax(360px,1fr));gap:12px;z-index:40;overflow:auto;padding:12px}
  /* single terminal card */
  .term-card{background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(0,0,0,0.15));border-radius:10px;border:1px solid rgba(0,255,171,0.04);box-shadow:0 10px 40px rgba(0,0,0,0.6);position:relative;display:flex;flex-direction:column;min-height:320px;overflow:hidden}
  .term-head{display:flex;align-items:center;gap:8px;padding:10px 12px;border-bottom:1px solid rgba(255,255,255,0.01);background:linear-gradient(180deg, rgba(0,0,0,0.02), transparent)}
  .term-head .name{font-weight:700;color:var(--neon)}
  .term-head .mini{margin-left:auto;display:flex;gap:6px}
  .term-body{padding:12px;flex:1;overflow:auto;background:linear-gradient(180deg, rgba(0,0,0,0.02), rgba(0,0,0,0.05));font-size:14px;line-height:1.45;white-space:pre-wrap}
  .term-footer{padding:8px 12px;border-top:1px solid rgba(255,255,255,0.01);display:flex;gap:8px;align-items:center;background:transparent}
  .prompt{color:var(--muted);font-weight:600}

  /* prompt input inline area */
  .input-span{display:inline-block;min-width:6px}

  /* cursor style */
  .cursor{display:inline-block;width:10px;height:16px;background:var(--neon);margin-left:6px;animation:blink 700ms steps(1) infinite;border-radius:2px;vertical-align:middle}
  @keyframes blink{0%{opacity:1}50%{opacity:0}100%{opacity:1}}

  /* neon glow effects */
  .glow{box-shadow:0 6px 30px rgba(0,240,255,0.06), inset 0 0 60px rgba(0,255,171,0.02)}

  /* matrix rain toggle small UI */
  .small-hint{font-size:12px;color:var(--muted)}

  /* glitch heading (center floating) */
  .glitch-wrap{position:fixed;left:50%;transform:translateX(-50%);top:14px;z-index:60;pointer-events:none}
  .glitch{font-size:18px;color:var(--neon);font-weight:800;letter-spacing:1px;mix-blend-mode:screen}
  .glitch::after, .glitch::before{content:attr(data-text);position:absolute;left:0;top:0;opacity:0.8}
  .glitch::before{color:#00ffab;clip-path:polygon(0 0,100% 0,100% 45%,0 45%);transform:translate(-2px,-1px)}
  .glitch::after{color:#00f0ff;clip-path:polygon(0 55%,100% 55%,100% 100%,0 100%);transform:translate(2px,1px)}

  /* progress bar for auto-scan */
  .scan-bar{height:8px;background:rgba(255,255,255,0.04);border-radius:6px;overflow:hidden;margin-top:8px}
  .scan-progress{height:100%;width:0%;background:linear-gradient(90deg,var(--accent),var(--neon));transition:width 150ms linear}

  /* fullscreen helper */
  .fs-btn{position:fixed;bottom:16px;right:16px;z-index:70;padding:10px 12px;border-radius:8px;background:rgba(0,0,0,0.4);border:1px solid rgba(255,255,255,0.04);color:var(--muted);cursor:pointer}
  .fs-btn.active{background:var(--neon);color:#00121a;border-color:var(--neon);box-shadow:0 12px 40px rgba(0,240,255,0.06)}

  /* responsive */
  @media (max-width:720px){
    .grid{inset:92px 8px 72px 8px;grid-template-columns:1fr}
    .glitch-wrap{display:none}
  }
</style>
</head>
<body>

<canvas id="matrix"></canvas>

<div class="bar">
  <div class="controls">
    <button class="ctrl primary" id="newTermBtn">+ New Terminal</button>
    <button class="ctrl" id="closeAllBtn">Close All</button>
    <div class="small-hint" style="margin-left:8px">Tip: tekan <strong>F</strong> untuk fullscreen</div>
  </div>

  <div class="title">404 NOT FOUND CYBERSEC — LAB / Terminal</div>
</div>

<div class="glitch-wrap"><div class="glitch" data-text="TERMINAL  —  404 NOT FOUND">TERMINAL  —  404 NOT FOUND</div></div>

<div class="grid" id="grid"></div>

<button id="fsBtn" class="fs-btn" title="Toggle Fullscreen (F)">Fullscreen</button>

<!-- embedded tiny audio (base64 WAV) -->
<audio id="typeAudio" preload="auto">
  <source src="data:audio/wav;base64,UklGRiQAAABXQVZFZm10IBAAAAABAAEAESsAACJWAAACABAAZGF0YQAAAAAA//8AAP//AAD//wAA//8AAP//AAD//wAA//8AAP//AAD//wAA" type="audio/wav">
</audio>
<audio id="beepAudio" preload="auto">
  <source src="data:audio/wav;base64,UklGRiQAAABXQVZFZm10IBAAAAABAAEAESsAACJWAAACABAAZGF0YQAAAAAA////AP///wD///8A////AP///wD///8A////AP///wD///8A" type="audio/wav">
</audio>

<script>
/* ============================================================
   TERMINAL CLASS - encapsulates per-window terminal behavior
   - supports input, backspace, commands, auto-scan animation
   - uses DOM nodes (no external libs)
   ============================================================ */

(function(){

  // utilities
  const ns = (sel, parent=document) => parent.querySelector(sel);
  const create = (tag, attrs={}) => { const el=document.createElement(tag); for(const k in attrs) if(k==='text') el.textContent=attrs[k]; else el.setAttribute(k, attrs[k]); return el; };
  const beep = () => { try{ beepAudio.currentTime=0; beepAudio.play(); }catch(e){} };
  const typeSoundPlay = () => { try{ typeAudio.currentTime=0; typeAudio.play(); }catch(e){} };

  // audio elements
  const typeAudio = document.getElementById('typeAudio');
  const beepAudio = document.getElementById('beepAudio');

  // GRID container
  const grid = document.getElementById('grid');

  // keep track
  let termCount = 0;
  const terminals = new Map();

  // Default commands help text
  const HELP_TEXT = [
    "Perintah Tersedia:",
    "  help               → Menampilkan perintah",
    "  scan <domain>      → Full vulnerability scan (simulasi)",
    "  dns <domain>       → DNS Lookup (nyata via dns.google)",
    "  whois <domain>     → WHOIS Lookup (simulasi/proxy)",
    "  ssl <domain>       → SSL quick info (simulasi)",
    "  clear              → Bersihkan layar",
    "  exit               → Tutup jendela terminal",
    "",
    "Shortcut: ketik angka (1..5) sebagai pintasan:",
    "  1 = whois, 2 = scan, 3 = headers, 4 = dns, 5 = ssl"
  ].join('\n');

  // Terminal constructor
  function TerminalWindow(opts={}){
    this.id = `term-${++termCount}`;
    this.title = opts.title || `terminal-${termCount}`;
    this.node = this.buildNode();
    this.body = ns('.term-body', this.node);
    this.inputSpan = null; // live input span node
    this.cursor = null;
    this.buffer = '';
    this.busy = false;
    this.init();
  }

  TerminalWindow.prototype.buildNode = function(){
    const card = create('div'); card.className = 'term-card glow';
    // head
    const head = create('div'); head.className = 'term-head';
    head.innerHTML = `<div class="name">${this.title}</div>`;
    const mini = create('div'); mini.className='mini';
    const btnClose = create('button'); btnClose.className='ctrl'; btnClose.textContent='✖';
    const btnClear = create('button'); btnClear.className='ctrl'; btnClear.textContent='Clear';
    const btnScan = create('button'); btnScan.className='ctrl'; btnScan.textContent='Auto-Scan';
    mini.appendChild(btnScan); mini.appendChild(btnClear); mini.appendChild(btnClose);
    head.appendChild(mini);
    card.appendChild(head);

    // body
    const body = create('div'); body.className='term-body';
    body.setAttribute('tabindex', '0');
    card.appendChild(body);

    // footer
    const foot = create('div'); foot.className='term-footer';
    foot.innerHTML = `<div class="prompt">&gt;</div><div class="input-span" aria-live="polite"></div>`;
    const scanContainer = create('div'); scanContainer.className='scan-bar'; scanContainer.style.display='none';
    const progress = create('div'); progress.className='scan-progress'; scanContainer.appendChild(progress);
    foot.appendChild(scanContainer);
    card.appendChild(foot);

    // attach events
    btnClose.addEventListener('click', ()=> this.destroy());
    btnClear.addEventListener('click', ()=> this.clear());
    btnScan.addEventListener('click', ()=> this.autoScan());
    // focus body when click
    body.addEventListener('click', ()=> this.focus());

    // expose progress bar
    card._progress = progress;
    card._scanContainer = scanContainer;

    grid.appendChild(card);
    return card;
  };

  TerminalWindow.prototype.init = function(){
    this.writeLine("=== 404 NOT FOUND CYBERSEC TERMINAL ===");
    this.writeLine("Booting system...");
    this.writeLine("Type 'help' for commands.\n");
    this.attachPrompt();
    // store in map
    terminals.set(this.id, this);
    this.node.id = this.id;
  };

  TerminalWindow.prototype.attachPrompt = function(){
    const footer = ns('.term-footer', this.node);
    this.inputSpan = footer.querySelector('.input-span');
    // create cursor
    this.cursor = create('span'); this.cursor.className='cursor';
    this.inputSpan.innerHTML = ''; // clear
    this.inputSpan.appendChild(document.createTextNode('')); // text node for buffer
    this.inputSpan.appendChild(this.cursor);
    this.focus();
  };

  TerminalWindow.prototype.write = function(text){
    // append plain text node to body
    this.body.appendChild(document.createTextNode(text));
    this.body.appendChild(document.createElement('br'));
    this.body.scrollTop = this.body.scrollHeight;
  };

  TerminalWindow.prototype.writeLine = function(text){
    this.body.appendChild(document.createTextNode(text));
    this.body.appendChild(document.createElement('br'));
    this.body.scrollTop = this.body.scrollHeight;
  };

  TerminalWindow.prototype.clear = function(){
    this.body.innerHTML = '';
    this.writeLine("[Screen cleared]");
    this.attachPrompt();
    this.buffer = '';
  };

  TerminalWindow.prototype.focus = function(){
    // focus this window (make it last in grid order by reappend)
    grid.appendChild(this.node);
    // ensure prompt visible
    this.inputSpan && this.inputSpan.scrollIntoView({block:'nearest'});
    // set global focusedTerm
    focusedTerm = this;
  };

  TerminalWindow.prototype.destroy = function(){
    terminals.delete(this.id);
    this.node.remove();
    // set focus to any remaining terminal
    const any = grid.querySelector('.term-card');
    if(any){
      const id = any.id;
      focusedTerm = terminals.get(id);
    } else {
      focusedTerm = null;
    }
  };

  TerminalWindow.prototype.updateInputDom = function(){
    // set text node value before cursor
    if(!this.inputSpan) return;
    // text node is firstChild
    const textNode = this.inputSpan.childNodes[0];
    if(textNode) textNode.nodeValue = this.buffer;
    this.body.scrollTop = this.body.scrollHeight;
  };

  TerminalWindow.prototype.onKey = async function(key){
    if(this.busy) return; // ignore keys while busy
    if(key === 'Enter'){
      const cmd = this.buffer.trim();
      this.writeLine('> ' + cmd);
      this.buffer = '';
      this.updateInputDom();
      await this.handleCommand(cmd);
      this.attachPrompt();
      return;
    }
    if(key === 'Backspace'){
      if(this.buffer.length>0){
        this.buffer = this.buffer.slice(0,-1);
        this.updateInputDom();
        typeSoundPlay();
      } else {
        beep();
      }
      return;
    }
    // printable
    this.buffer += key;
    this.updateInputDom();
    typeSoundPlay();
  };

  TerminalWindow.prototype.handleCommand = async function(cmd){
    if(!cmd) return;
    const parts = cmd.split(/\s+/);
    const base = parts[0].toLowerCase();
    const arg = parts[1] || '';

    // numeric shortcuts
    if(['1','2','3','4','5'].includes(base)){
      if(base==='1') return this.cmd_whois(arg);
      if(base==='2') return this.cmd_scan(arg);
      if(base==='3') return this.cmd_headers(arg);
      if(base==='4') return this.cmd_dns(arg);
      if(base==='5') return this.cmd_ssl(arg);
    }

    switch(base){
      case 'help': this.writeLine(HELP_TEXT); break;
      case 'clear': this.clear(); break;
      case 'exit': this.writeLine('Closing...'); this.destroy(); break;
      case 'whois': await this.cmd_whois(arg); break;
      case 'dns': await this.cmd_dns(arg); break;
      case 'headers': await this.cmd_headers(arg); break;
      case 'ssl': await this.cmd_ssl(arg); break;
      case 'scan': await this.cmd_scan(arg); break;
      default: this.writeLine("Perintah tidak dikenal: " + base); break;
    }
  };

  /* ========== COMMAND IMPLEMENTATIONS ========== */

  TerminalWindow.prototype.cmd_whois = async function(domain){
    if(!domain){ this.writeLine("Gunakan: whois example.com"); return; }
    this.writeLine(`[WHOIS] Looking up ${domain} ...`);
    // try proxy whois via allorigins to mitigate CORS (may fail)
    try{
      const res = await fetch(`https://api.allorigins.win/raw?url=https://who.is/whois/${encodeURIComponent(domain)}`);
      if(res.ok){
        const txt = await res.text();
        const snippet = txt.split(/\r?\n/).slice(0,30).join('\n');
        this.writeLine(snippet);
        this.writeLine("[INFO] WHOIS raw (proxy).");
        return;
      }
    }catch(e){}
    // fallback simulated
    this.writeLine("Registrar: EXAMPLE-REG");
    this.writeLine("Registrant: PRIVATE");
    this.writeLine("Created: 2018-06-01");
  };

  TerminalWindow.prototype.cmd_dns = async function(domain){
    if(!domain){ this.writeLine("Gunakan: dns example.com"); return; }
    this.writeLine(`[DNS] Querying ${domain} via Google DNS API...`);
    try{
      const r = await fetch(`https://dns.google/resolve?name=${encodeURIComponent(domain)}&type=ANY`);
      const json = await r.json();
      if(json.Answer){
        json.Answer.forEach(a=> this.writeLine(`${a.name} (type ${a.type}) → ${a.data}`));
      } else {
        this.writeLine("[DNS] No Answer records found.");
      }
    }catch(e){
      this.writeLine("[ERROR] DNS query failed: " + (e.message||e));
    }
  };

  TerminalWindow.prototype.cmd_headers = async function(domain){
    if(!domain){ this.writeLine("Gunakan: headers example.com"); return; }
    this.writeLine(`[HEADERS] Checking security headers for ${domain} ...`);
    try{
      const res = await fetch(`https://securityheaders.com/?q=${encodeURIComponent(domain)}&format=json`);
      if(res.ok){
        const json = await res.json();
        if(json.headers){
          Object.entries(json.headers).slice(0,8).forEach(([k,v])=> this.writeLine(`${k}: ${v}`));
        } else {
          this.writeLine(JSON.stringify(json).slice(0,300));
        }
        return;
      }
    }catch(e){}
    // fallback
    this.writeLine("Strict-Transport-Security: max-age=63072000; includeSubDomains; preload");
    this.writeLine("X-Frame-Options: DENY");
    this.writeLine("X-Content-Type-Options: nosniff");
  };

  TerminalWindow.prototype.cmd_ssl = async function(domain){
    if(!domain){ this.writeLine("Gunakan: ssl example.com"); return; }
    this.writeLine(`[SSL] Quick fetch for ${domain} ...`);
    try{
      const r = await fetch(`https://${domain}`, {method:'HEAD'});
      if(r.ok){
        this.writeLine("[SSL] HTTPS reachable.");
        this.writeLine("Server: " + (r.headers.get('server')||'unknown'));
        this.writeLine("[INFO] For full SSL grading use SSLLabs (server-side).");
        return;
      }
    }catch(e){}
    this.writeLine("[INFO] SSL details unavailable due to browser CORS.");
  };

  TerminalWindow.prototype.cmd_scan = async function(domain){
    if(!domain){ this.writeLine("Gunakan: scan example.com"); return; }
    this.writeLine(`[SCAN] Starting simulated full scan for ${domain} ...`);
    await this.autoScan(domain);
    this.writeLine("[SCAN] Done. Note: many checks simulated in-browser.");
  };

  /* ========== Auto Scan animation (progress + fake steps) ========== */
  TerminalWindow.prototype.autoScan = async function(domain){
    const card = this.node;
    const progress = card._progress;
    const container = card._scanContainer;
    container.style.display = 'block';
    progress.style.width = '0%';
    this.busy = true;

    const steps = [
      "Resolving DNS",
      "Port scan (basic)",
      "Checking HTTP headers",
      "XSS payloads (simulated)",
      "SQLi patterns (simulated)",
      "CSRF detection",
      "SSL quick check",
      "Aggregating results"
    ];

    for(let i=0;i<steps.length;i++){
      const pct = Math.round((i/steps.length)*100);
      progress.style.width = pct + '%';
      this.writeLine("  → " + steps[i] + " ...");
      await new Promise(r => setTimeout(r, 500 + Math.random()*600));
      this.writeLine("     OK");
      typeSoundPlay();
    }
    progress.style.width = '100%';
    await new Promise(r => setTimeout(r,400));
    container.style.display = 'none';
    this.busy = false;
  };

  /* ========== create new terminal helper ========== */
  function createNewTerminal(){
    const term = new TerminalWindow({title: 'terminal-' + (termCount+1)});
    term.focus();
    return term;
  }

  // expose create via button
  document.getElementById('newTermBtn').addEventListener('click', ()=> createNewTerminal());
  document.getElementById('closeAllBtn').addEventListener('click', ()=>{
    // close all
    Array.from(terminals.keys()).forEach(k=>{ terminals.get(k) && terminals.get(k).destroy() });
  });

  // keyboard router: send keys to focused terminal
  let focusedTerm = null;
  window.addEventListener('keydown', (e)=>{
    // fullscreen toggle F
    if(e.key === 'f' || e.key === 'F'){
      toggleFullscreen();
      e.preventDefault();
      return;
    }
    if(!focusedTerm){
      // if no terminal create one automatically
      const t = createNewTerminal();
      focusedTerm = t;
    }
    // special keys mapping
    if(e.key === 'Enter'){ focusedTerm.onKey('Enter'); e.preventDefault(); return; }
    if(e.key === 'Backspace'){ focusedTerm.onKey('Backspace'); e.preventDefault(); return; }
    if(e.key.length === 1 && !e.ctrlKey && !e.metaKey){ focusedTerm.onKey(e.key); e.preventDefault(); return; }
  });

  // start with one terminal
  createNewTerminal();

  /* ========== Typing & beep helpers ========== */
  function typeSoundPlay(){
    try{ typeAudio.currentTime = 0; typeAudio.play(); }catch(e){}
  }
  function beep(){ try{ beepAudio.currentTime = 0; beepAudio.play(); }catch(e){} }

  /* ======= Fullscreen toggle ======= */
  const fsBtn = document.getElementById('fsBtn');
  fsBtn.addEventListener('click', toggleFullscreen);
  function toggleFullscreen(){
    if(!document.fullscreenElement){
      document.documentElement.requestFullscreen().catch(()=>{});
      fsBtn.classList.add('active');
    } else {
      document.exitFullscreen().catch(()=>{});
      fsBtn.classList.remove('active');
    }
  }

  /* ========== Matrix Rain Background ========== */
  const canvas = document.getElementById('matrix');
  const ctx = canvas.getContext('2d');
  let W = canvas.width = innerWidth;
  let H = canvas.height = innerHeight;
  window.addEventListener('resize', ()=>{ W = canvas.width = innerWidth; H = canvas.height = innerHeight; initMatrix(); });

  let columns, drops;
  function initMatrix(){
    const fontSize = 14;
    columns = Math.floor(W / fontSize);
    drops = new Array(columns).fill(1).map(()=> Math.floor(Math.random()*H/fontSize));
  }
  const letters = "ﾊﾐﾋｰｳｼﾅﾓﾆｻﾜﾂｵｶｷﾖﾚﾑﾍﾏﾉﾅﾏｻ".split('');
  function drawMatrix(){
    ctx.fillStyle = "rgba(0,0,0,0.08)";
    ctx.fillRect(0,0,W,H);
    ctx.font = "14px monospace";
    for(let i=0;i<columns;i++){
      const text = letters[Math.floor(Math.random()*letters.length)];
      const x = i*14;
      const y = drops[i]*14;
      ctx.fillStyle = i%2 ? "rgba(0,240,255,0.4)" : "rgba(0,255,171,0.6)";
      ctx.fillText(text, x, y);
      drops[i]++;
      if(drops[i]*14 > H && Math.random()>0.975) drops[i]=0;
    }
  }
  initMatrix();
  setInterval(drawMatrix, 60);

  /* ========== Glitch effect pulse (title) ========== */
  (function glitchPulse(){
    const g = document.querySelector('.glitch');
    let t=0;
    setInterval(()=>{ g.style.transform = `translateY(${Math.sin(t)*2}px)`; t+=0.08; }, 120);
  })();

})();
</script>
</body>
</html>
