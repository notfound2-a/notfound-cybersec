<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<title>404 CYBERSEC Hacker Terminal</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
/* ---------------- GLOBAL STYLE ---------------- */
body {
    margin: 0;
    background: #000;
    overflow: hidden;
    font-family: "Courier New", monospace;
}

/* ---------------- MATRIX RAIN ---------------- */
canvas#matrix {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    z-index: 1;
    pointer-events: none;
}

/* ---------------- TERMINAL WRAPPER ---------------- */
#terminal-wrap {
    position: relative;
    z-index: 2;
    width: 90%;
    max-width: 900px;
    height: 80vh;
    margin: 30px auto;
    padding: 15px;
    background: rgba(0,0,0,0.75);
    border: 2px solid #00eaff;
    box-shadow: 0 0 25px #00eaff, inset 0 0 30px #0088aa;
    border-radius: 10px;
    overflow-y: auto;
    color: #0ff;
    font-size: 16px;
    white-space: pre-wrap;
    word-break: break-word;
}

/* ---------------- BLINKING CURSOR ---------------- */
.cursor {
    display: inline-block;
    width: 10px;
    height: 18px;
    background: #00f2ff;
    animation: blink 0.6s infinite;
}
@keyframes blink { 0%,100% {opacity:1} 50%{opacity:0} }

/* ---------------- NEW TERMINAL BUTTON ---------------- */
#newTerm {
    position: fixed;
    top: 20px;
    right: 20px;
    padding: 8px 18px;
    background: #00eaff;
    color: #000;
    font-weight: bold;
    border-radius: 6px;
    cursor: pointer;
    z-index: 3;
    box-shadow: 0 0 15px #00eaff;
}
#newTerm:hover {
    box-shadow: 0 0 25px #00ffff;
}

/* ---------------- SCAN TABLE ---------------- */
.scan-table {
    border-collapse: collapse;
    width: 100%;
    margin-top: 8px;
}
.scan-table th, .scan-table td {
    border: 1px solid #0ff;
    padding: 4px 8px;
    text-align: left;
}
.scan-ok { color: #0f0; }
.scan-warning { color: #ff0; }
.scan-critical { color: #f00; }
</style>
</head>
<body>

<canvas id="matrix"></canvas>

<div id="newTerm">NEW TERMINAL</div>
<div id="terminal-wrap"></div>

<audio id="typeSound" src="https://assets.mixkit.co/sfx/preview/mixkit-typewriter-soft-hit-1125.mp3"></audio>

<script>
/* ==========================================================
   MATRIX RAIN EFFECT
========================================================== */
const canvas = document.getElementById("matrix");
const ctx = canvas.getContext("2d");
canvas.height = window.innerHeight;
canvas.width = window.innerWidth;

const chars = "01ABCDEFGHIJKLMNOPQRSTUVWXYZ";
const drops = Array(Math.floor(canvas.width / 15)).fill(1);

function matrixRain() {
    ctx.fillStyle = "rgba(0,0,0,0.05)";
    ctx.fillRect(0, 0, canvas.width, canvas.height);
    ctx.fillStyle = "#00eaff";
    ctx.font = "15px Courier";
    drops.forEach((y, i) => {
        const text = chars[Math.floor(Math.random() * chars.length)];
        ctx.fillText(text, i * 15, y * 15);
        drops[i] = y * 15 > canvas.height && Math.random() > 0.975 ? 0 : y + 1;
    });
}
setInterval(matrixRain, 40);

/* ==========================================================
   TERMINAL ENGINE
========================================================== */
const terminal = document.getElementById("terminal-wrap");
const audio = document.getElementById("typeSound");
let input = "";

// play type sound
function playSound() {
    audio.currentTime = 0;
    audio.play();
}

// print text character by character
async function print(text, delay = 5) {
    return new Promise(resolve => {
        let i = 0;
        function typing() {
            if (i < text.length) {
                terminal.innerHTML += text[i];
                playSound();
                i++;
                setTimeout(typing, delay);
            } else resolve();
        }
        typing();
    });
}

// new line prompt
function newLine() {
    terminal.innerHTML += "> ";
    createCursor();
    terminal.scrollTop = terminal.scrollHeight;
}

// create blinking cursor
function createCursor() {
    const old = document.querySelector(".cursor");
    if (old) old.remove();
    const c = document.createElement("span");
    c.classList.add("cursor");
    terminal.appendChild(c);
}

/* ==========================================================
   BOOT SEQUENCE
========================================================== */
async function boot() {
    terminal.innerHTML = "";
    await print("BOOTING 404 CYBERSEC TERMINAL...\n", 20);
    await print("Loading kernel modules...\n", 15);
    await print("Initializing matrix engine...\n", 10);
    await print("Ready.\n\n");
    await print("Ketik 'help' atau tekan angka:\n1 WHOIS | 2 SCAN | 3 HEADERS | 4 DNS | 5 SSL\n\n");
    newLine();
}

/* ==========================================================
   COMMAND PROCESSOR
========================================================== */
async function commandProcessor(cmd) {
    cmd = cmd.trim();
    if (!cmd) return newLine();
    terminal.innerHTML += "\n";

    // Shortcut angka
    if (!isNaN(cmd)) {
        if (cmd === "1") return runWhois("example.com");
        if (cmd === "2") return runScan("example.com");
        if (cmd === "3") return runHeaders("example.com");
        if (cmd === "4") return runDNS("example.com");
        if (cmd === "5") return runSSL("example.com");
    }

    if (cmd === "help") {
        await print(
`Perintah Tersedia:
  help               → Menampilkan perintah
  scan <domain>      → Full vulnerability scan
  dns <domain>       → DNS lookup
  whois <domain>     → WHOIS data
  ssl <domain>       → Cek SSL
  clear              → Bersihkan layar
  Tekan angka:
  1=whois  2=scan  3=headers  4=dns  5=ssl
`);
    } else if (cmd === "clear") {
        terminal.innerHTML = "";
        return newLine();
    } else if (cmd.startsWith("scan ")) {
        const d = cmd.split(" ")[1];
        return runScan(d);
    } else if (cmd.startsWith("dns ")) {
        const d = cmd.split(" ")[1];
        return runDNS(d);
    } else if (cmd.startsWith("whois ")) {
        const d = cmd.split(" ")[1];
        return runWhois(d);
    } else if (cmd.startsWith("ssl ")) {
        const d = cmd.split(" ")[1];
        return runSSL(d);
    } else {
        await print("Perintah tidak dikenal.\n");
    }
    newLine();
}

/* ==========================================================
   SCAN FUNCTION — SIMULASI API DAN TABEL RAPI
========================================================== */
async function runScan(domain) {
    await print(`\n[ SCAN STARTED ] Target: ${domain}\n`);
    await print("----------------------------------------------------\n");

    await print("Initializing scanner engine...\n", 10);
    await print("Loading modules: XSS, SQLi, RCE, SSL, Headers...\n\n", 10);

    // Simulasi API JSON
    const scanData = {
        modules: [
            {name:"XSS Detection", status:"OK"},
            {name:"SQL Injection", status:"OK"},
            {name:"Command Injection", status:"OK"},
            {name:"Directory Traversal", status:"OK"},
            {name:"Open Redirect", status:"WARNING"},
            {name:"Security Headers", status:"CRITICAL"},
            {name:"SSL Certificate", status:"OK"},
            {name:"Mixed Content", status:"OK"},
            {name:"CSP Policy", status:"WARNING"},
            {name:"Deprecated Protocols", status:"OK"}
        ],
        issues: [
            "Missing Content-Security-Policy header",
            "Missing X-Frame-Options",
            "Open Redirect behavior detected"
        ],
        cves: [
            {id:"CVE-20XX-1122", risk:"No risk"},
            {id:"CVE-20XX-9001", risk:"Medium risk"},
            {id:"CVE-20XX-5532", risk:"Not applicable"}
        ],
        score: 73,
        risk: "Medium Risk"
    };

    // Tabel hasil scan
    let table = "\n+------------------------+-----------+\n";
    table += "| Module                 | Status    |\n";
    table += "+------------------------+-----------+\n";
    scanData.modules.forEach(m => {
        let color = m.status === "OK" ? "\x1b[32m" :
                    m.status === "WARNING" ? "\x1b[33m" : "\x1b[31m";
        table += `| ${m.name.padEnd(22)} | ${m.status.padEnd(9)} |\n`;
    });
    table += "+------------------------+-----------+\n";
    await print(table, 5);

    await print("Possible Issues:\n",5);
    scanData.issues.forEach(i => print(`  • ${i}\n`,5));
    await print("\nFake CVE Simulation:\n",5);
    scanData.cves.forEach(c => print(`  - ${c.id} → ${c.risk}\n`,5));
    await print("\n[ FINAL SECURITY SCORE ]\n",5);
    await print(`  → ${scanData.score} / 100 (${scanData.risk})\n\n`,10);

    newLine();
}

/* ==========================================================
   OTHER COMMANDS
========================================================== */
async function runDNS(domain) {
    await print(`DNS Lookup: ${domain}\nA: 192.168.1.5\nMX: mail.example.com\n`);
    newLine();
}
async function runWhois(domain) {
    await print(`WHOIS: ${domain}\nRegistrar: Cloudflare\nCountry: US\n`);
    newLine();
}
async function runSSL(domain) {
    await print(`SSL: ${domain}\nIssuer: Let's Encrypt\nStatus: VALID\n`);
    newLine();
}
async function runHeaders(domain) {
    await print(`HEADERS: ${domain}\nX-Frame-Options: DENY\nContent-Security-Policy: missing\n`);
    newLine();
}

/* ==========================================================
   KEYBOARD INPUT FIX (DESKTOP + MOBILE)
========================================================== */
document.addEventListener("keydown", e => {
    const cursor = document.querySelector(".cursor");
    if(cursor) cursor.remove();

    if (e.key === "Enter") {
        terminal.innerHTML += "\n";
        commandProcessor(input);
        input = "";
    } else if (e.key === "Backspace") {
        if (input.length > 0) {
            input = input.slice(0, -1);
            terminal.innerHTML = terminal.innerHTML.slice(0, -1);
        }
    } else if (e.key.length === 1) {
        input += e.key;
        terminal.innerHTML += e.key;
        playSound();
    }
    createCursor();
    terminal.scrollTop = terminal.scrollHeight;
});

// Mobile touch input
terminal.addEventListener("click", () => {
    const inputEl = document.createElement("input");
    inputEl.style.position = "fixed";
    inputEl.style.opacity = "0";
    document.body.appendChild(inputEl);
    inputEl.focus();
    inputEl.addEventListener("input", e => {
        input += e.target.value;
        terminal.innerHTML += e.target.value;
        e.target.value = "";
        createCursor();
        terminal.scrollTop = terminal.scrollHeight;
    });
    inputEl.addEventListener("blur", () => document.body.removeChild(inputEl));
});

/* ==========================================================
   NEW TERMINAL BUTTON
========================================================== */
document.getElementById("newTerm").onclick = () => boot();

// Start terminal
boot();
</script>
</body>
</html>
